{"remainingRequest":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mahithadasari/Downloads/cw3-individual-main/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/src/App.vue","mtime":1649102379802},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMZXNzb25zIGZyb20gJy4vY29tcG9uZW50cy9MZXNzb25zLnZ1ZScKaW1wb3J0IENoZWNrb3V0IGZyb20gJy4vY29tcG9uZW50cy9DaGVja291dC52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgTGVzc29ucywKICAgIENoZWNrb3V0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKCiAgICAgICBsZXNzb25zOiBbXSwKICAgICAgCiAgICAgICAgY2FydEl0ZW1zOiBbCgogICAgICAgIF0sCiAgICAgICAgc2hvd1Byb2R1Y3Q6IHRydWUsCiAgICAgICAgc2VhcmNoVHh0OiAnJywKICAgICAgICAKICAgICAgICAKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZExlc3NvblRvQ2FydDogZnVuY3Rpb24gKGxlc3NvbklELCBsZXNzb24pIHsKICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBsZXNzb25JbmRleCA9IHRoaXMubGVzc29ucy5maW5kSW5kZXgobGVzc29uID0+IGxlc3Nvbi5faWQgPT09IGxlc3NvbklEKTsKICAgICAgICAgICAgaWYgKGxlc3NvbkluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxlc3NvbnNbbGVzc29uSW5kZXhdLmF2YWlsYWJsZXNwYWNlIC09IDE7ICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgICB0aGlzLmFkZFRvQ2FydChsZXNzb25JRCwgbGVzc29uKTsKICAgICAgICB9LAogICAgICAgIAogICAgICAgIHVwZGF0ZVNob3dQcm9kdWN0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1Byb2R1Y3QgPSAhdGhpcy5zaG93UHJvZHVjdDsKICAgICAgICB9LAogICAgICAgIGFkZFRvQ2FydDogZnVuY3Rpb24gKGxlc3NvbklELCBsZXNzb24pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJoZXJlIik7CiAgICAgICAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuY2FydEl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ubGVzc29uSUQgPT09IGxlc3NvbklEKTsKICAgICAgICAgICAgaWYgKGl0ZW1JbmRleCAhPSAtMSkgewogICAgICAgICAgICAgICAgdGhpcy5jYXJ0SXRlbXNbaXRlbUluZGV4XS5zcGFjZSArPSAxOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5jYXJ0SXRlbXMucHVzaCh7IGxlc3NvbklEOiBsZXNzb25JRCwgc3BhY2U6IDEsIGxlc3NvbjogbGVzc29uIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZW1vdmVMZXNzb25Gcm9tQ2FydDogZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgIHRoaXMuY2FydEl0ZW1zW2luZGV4XS5zcGFjZSA9IHRoaXMuY2FydEl0ZW1zW2luZGV4XS5zcGFjZSAtIDE7CiAgICAgICAgICAgIGNvbnN0IGxlc3NvbkluZGV4ID0gdGhpcy5sZXNzb25zLmZpbmRJbmRleChsZXNzb24gPT4gbGVzc29uLl9pZCA9PT0gdGhpcy5jYXJ0SXRlbXNbaW5kZXhdLmxlc3NvbklEKTsKICAgICAgICAgICAgaWYgKGxlc3NvbkluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxlc3NvbnNbbGVzc29uSW5kZXhdLmF2YWlsYWJsZXNwYWNlICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuY2FydEl0ZW1zW2luZGV4XS5zcGFjZSA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNhcnRJdGVtcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZih0aGlzLmNhcnRJdGVtcy5sZW5ndGggPT0gMCl7CiAgICAgICAgICAgICAgdGhpcy5zaG93UHJvZHVjdCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2FydEl0ZW1zKTsKCgogICAgICAgIH0sCiAgICAgICAgY2FydENvdW50OiBmdW5jdGlvbigpewogICAgICAgICAgICBsZXQgY2FydFF1YW50aXR5ID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuY2FydEl0ZW1zLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgY2FydFF1YW50aXR5ICs9IHRoaXMuY2FydEl0ZW1zW2luZGV4XS5zcGFjZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjYXJ0UXVhbnRpdHk7CiAgICAgICAgfSwKICAgICAgICBzZWFyY2hMZXNzb25zOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICBmZXRjaCgiaHR0cHM6Ly9jdzItYmFja2VuZC5oZXJva3VhcHAuY29tL2NvbGxlY3Rpb24vbGVzc29uLyIgKyB0aGlzLnNlYXJjaFR4dCkudGhlbigKICAgICAgICAgICAgKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbigKICAgICAgICAgICAgICAgICAgICAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZXNzb25zID0gZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5sZXNzb25zKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGNoZWNrT3V0OiBmdW5jdGlvbiAoY2hlY2tPdXROYW1lLCBjaGVja091dE51bWJlcikgewogICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9jdzItYmFja2VuZC5oZXJva3VhcHAuY29tL2NvbGxlY3Rpb24vb3JkZXInLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgLy8gc2V0IHRoZSBIVFRQIG1ldGhvZCBhcyAnUE9TVCcKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAvLyBzZXQgdGhlIGRhdGEgdHlwZSBhcyBKU09OCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBjaGVja091dE5hbWUsIHBob25lOiBjaGVja091dE51bWJlciwgbGVzc29uczogdGhpcy5jYXJ0SXRlbXMgfSksIC8vIG5lZWQgdG8gc3RyaW5naWZ5IHRoZSBKU09OIG9iamVjdAogICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2VKU09OID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2VzczonLCByZXNwb25zZUpTT04pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5jYXJ0SXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBsZXNzb24gPSB0aGlzLmNhcnRJdGVtc1tpbmRleF0ubGVzc29uOwogICAgICAgICAgICAgICAgZmV0Y2goYGh0dHBzOi8vY3cyLWJhY2tlbmQuaGVyb2t1YXBwLmNvbS9jb2xsZWN0aW9uL2xlc3Nvbi8ke2xlc3Nvbi5faWR9YCwgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsIC8vIHNldCB0aGUgSFRUUCBtZXRob2QgYXMgJ1BPU1QnCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAvLyBzZXQgdGhlIGRhdGEgdHlwZSBhcyBKU09OCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YWlsYWJsZXNwYWNlOiBsZXNzb24uYXZhaWxhYmxlc3BhY2V9KSwgLy8gbmVlZCB0byBzdHJpbmdpZnkgdGhlIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZUpTT04gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2VzczonLCByZXNwb25zZUpTT04pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGFsZXJ0KCJDaGVjayBvdXQgc3VjY2Vzc2Z1bFxuWW91ciBvcmRlciBoYXMgYmVlbiBzdWJtaXR0ZWQiKTsKICAgICAgICAgICAgdGhpcy5zaG93UHJvZHVjdCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuY2FydEl0ZW1zID0gW107CiAgICAgICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgICAgdGl0bGU6ICJDaGVjayBvdXQgc3VjY2Vzc2Z1bCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiWW91ciBvcmRlciBoYXMgYmVlbiBzdWJtaXR0ZWQiLAogICAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBmZXRjaExlc3NvbjogZnVuY3Rpb24gKF9pZCkgewogICAgICAgICAgICBjb25zdCBsZXNzb25JbmRleCA9IHRoaXMubGVzc29ucy5maW5kSW5kZXgobGVzc29uID0+IGxlc3Nvbi5faWQgPT09IF9pZCk7CiAgICAgICAgICAgIGlmIChsZXNzb25JbmRleCA9PSAtMSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlc3NvbnNbbGVzc29uSW5kZXhdOwogICAgICAgIH0KICAgICAgIAogICAgfSwKICAgIAogICAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgICAgIGZldGNoKCJodHRwczovL2N3Mi1iYWNrZW5kLmhlcm9rdWFwcC5jb20vY29sbGVjdGlvbi9sZXNzb24vIikudGhlbigKICAgICAgICAgICAgIChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oCiAgICAgICAgICAgICAgICAgICAgIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlc3NvbnMgPSBkYXRhOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxlc3NvbnMgKyAiRmV0Y2hlZCIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n\n\n    <section id=\"search-bar\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-3\">\n                        <h2>AfterSchoolApp</h2>\n                    </div>\n                    <div class=\"col-md-7\">\n                        \n                            <input class=\"form-control\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\" v-on:keyup=\"searchLessons\" v-model=\"searchTxt\">\n                       \n                    </div>\n                    <div class=\"col-md-2 cart\">\n                        <button class=\"btn btn-1 btn-info\" v-bind:disabled=\"(cartItems.length <= 0)\"\n                        v-on:click=\"updateShowProduct\"><p class=\"fa fa-shopping-cart mt-2\" style=\"color: white;\"></p> <span\n                            style=\"color: white\">{{cartCount()}}</span></button>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <section id=\"navigation\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div style=\"padding-left: 6rem\">\n                        <p>Home / Browse Lessons</p>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <section v-if=\"showProduct\" id=\"product\">\n            <Lessons :lessons=\"lessons\" v-on:addLesson=\"addLessonToCart\"></Lessons>\n        </section>\n\n        <section v-else id=\"check-out\">\n            <Checkout :cartItems=\"cartItems\" v-on:removeLesson=\"removeLessonFromCart\" v-on:checkOut=\"checkOut\"></Checkout>\n            \n        </section>\n  </div>\n</template>\n\n<script>\nimport Lessons from './components/Lessons.vue'\nimport Checkout from './components/Checkout.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Lessons,\n    Checkout\n  },\n  data() {\n    return {\n\n       lessons: [],\n      \n        cartItems: [\n\n        ],\n        showProduct: true,\n        searchTxt: '',\n        \n        \n    }\n  },\n  methods: {\n    addLessonToCart: function (lessonID, lesson) {\n          \n            const lessonIndex = this.lessons.findIndex(lesson => lesson._id === lessonID);\n            if (lessonIndex != -1) {\n                this.lessons[lessonIndex].availablespace -= 1;       \n            }\n             this.addToCart(lessonID, lesson);\n        },\n        \n        updateShowProduct: function () {\n            this.showProduct = !this.showProduct;\n        },\n        addToCart: function (lessonID, lesson) {\n          console.log(\"here\");\n            const itemIndex = this.cartItems.findIndex(item => item.lessonID === lessonID);\n            if (itemIndex != -1) {\n                this.cartItems[itemIndex].space += 1;\n            } else {\n                this.cartItems.push({ lessonID: lessonID, space: 1, lesson: lesson });\n            }\n        },\n        removeLessonFromCart: function (index) {\n            this.cartItems[index].space = this.cartItems[index].space - 1;\n            const lessonIndex = this.lessons.findIndex(lesson => lesson._id === this.cartItems[index].lessonID);\n            if (lessonIndex != -1) {\n                this.lessons[lessonIndex].availablespace += 1;\n            }\n            if (this.cartItems[index].space == 0) {\n                this.cartItems.splice(index, 1);\n            }\n\n            if(this.cartItems.length == 0){\n              this.showProduct = true;\n            }\n\n            console.log(this.cartItems);\n\n\n        },\n        cartCount: function(){\n            let cartQuantity = 0;\n            for (let index = 0; index < this.cartItems.length; index++) {\n                cartQuantity += this.cartItems[index].space;\n                \n            }\n            return cartQuantity;\n        },\n        searchLessons: function () {\n            \n            fetch(\"https://cw2-backend.herokuapp.com/collection/lesson/\" + this.searchTxt).then(\n            (response) => {\n                response.json().then(\n                    (data) => {\n                        console.log(data);\n                        this.lessons = data;\n                        console.log(this.lessons);\n                    });\n            })\n        },\n        checkOut: function (checkOutName, checkOutNumber) {\n            fetch('https://cw2-backend.herokuapp.com/collection/order', {\n                method: 'POST', // set the HTTP method as 'POST'\n                headers: {\n                    'Content-Type': 'application/json', // set the data type as JSON\n                },\n                body: JSON.stringify({ name: checkOutName, phone: checkOutNumber, lessons: this.cartItems }), // need to stringify the JSON object\n            })\n                .then(response => response.json())\n                .then(responseJSON => {\n                    console.log('Success:', responseJSON);\n                });\n\n            for (let index = 0; index < this.cartItems.length; index++) {\n                const lesson = this.cartItems[index].lesson;\n                fetch(`https://cw2-backend.herokuapp.com/collection/lesson/${lesson._id}`, {\n                    method: 'PUT', // set the HTTP method as 'POST'\n                    headers: {\n                        'Content-Type': 'application/json', // set the data type as JSON\n                    },\n                    body: JSON.stringify({ availablespace: lesson.availablespace}), // need to stringify the JSON object\n                })\n                    .then(response => response.json())\n                    .then(responseJSON => {\n                        console.log('Success:', responseJSON);\n                    });\n            }\n            // alert(\"Check out successful\\nYour order has been submitted\");\n            this.showProduct = true;\n            this.cartItems = [];\n            this.$swal({\n                title: \"Check out successful\",\n                text: \"Your order has been submitted\",\n                icon: \"success\",\n            });\n            \n        },\n        fetchLesson: function (_id) {\n            const lessonIndex = this.lessons.findIndex(lesson => lesson._id === _id);\n            if (lessonIndex == -1) {\n                return;\n            }\n            return this.lessons[lessonIndex];\n        }\n       \n    },\n    \n    created: function () {\n        fetch(\"https://cw2-backend.herokuapp.com/collection/lesson/\").then(\n             (response) => {\n                response.json().then(\n                     (data) => {\n                        console.log(data);\n                        this.lessons = data;\n                        console.log(this.lessons + \"Fetched\");\n                    });\n            })\n    }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"]}]}