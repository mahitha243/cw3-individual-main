{"remainingRequest":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mahithadasari/Downloads/cw3-individual-main/src/App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/src/App.vue","mtime":1649102379802},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mahithadasari/Downloads/cw3-individual-main/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojYXBwIHsKICBmb250LWZhbWlseTogQXZlbmlyLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiAjMmMzZTUwOwogIG1hcmdpbi10b3A6IDYwcHg7Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n\n\n    <section id=\"search-bar\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-3\">\n                        <h2>AfterSchoolApp</h2>\n                    </div>\n                    <div class=\"col-md-7\">\n                        \n                            <input class=\"form-control\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\" v-on:keyup=\"searchLessons\" v-model=\"searchTxt\">\n                       \n                    </div>\n                    <div class=\"col-md-2 cart\">\n                        <button class=\"btn btn-1 btn-info\" v-bind:disabled=\"(cartItems.length <= 0)\"\n                        v-on:click=\"updateShowProduct\"><p class=\"fa fa-shopping-cart mt-2\" style=\"color: white;\"></p> <span\n                            style=\"color: white\">{{cartCount()}}</span></button>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <section id=\"navigation\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div style=\"padding-left: 6rem\">\n                        <p>Home / Browse Lessons</p>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <section v-if=\"showProduct\" id=\"product\">\n            <Lessons :lessons=\"lessons\" v-on:addLesson=\"addLessonToCart\"></Lessons>\n        </section>\n\n        <section v-else id=\"check-out\">\n            <Checkout :cartItems=\"cartItems\" v-on:removeLesson=\"removeLessonFromCart\" v-on:checkOut=\"checkOut\"></Checkout>\n            \n        </section>\n  </div>\n</template>\n\n<script>\nimport Lessons from './components/Lessons.vue'\nimport Checkout from './components/Checkout.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Lessons,\n    Checkout\n  },\n  data() {\n    return {\n\n       lessons: [],\n      \n        cartItems: [\n\n        ],\n        showProduct: true,\n        searchTxt: '',\n        \n        \n    }\n  },\n  methods: {\n    addLessonToCart: function (lessonID, lesson) {\n          \n            const lessonIndex = this.lessons.findIndex(lesson => lesson._id === lessonID);\n            if (lessonIndex != -1) {\n                this.lessons[lessonIndex].availablespace -= 1;       \n            }\n             this.addToCart(lessonID, lesson);\n        },\n        \n        updateShowProduct: function () {\n            this.showProduct = !this.showProduct;\n        },\n        addToCart: function (lessonID, lesson) {\n          console.log(\"here\");\n            const itemIndex = this.cartItems.findIndex(item => item.lessonID === lessonID);\n            if (itemIndex != -1) {\n                this.cartItems[itemIndex].space += 1;\n            } else {\n                this.cartItems.push({ lessonID: lessonID, space: 1, lesson: lesson });\n            }\n        },\n        removeLessonFromCart: function (index) {\n            this.cartItems[index].space = this.cartItems[index].space - 1;\n            const lessonIndex = this.lessons.findIndex(lesson => lesson._id === this.cartItems[index].lessonID);\n            if (lessonIndex != -1) {\n                this.lessons[lessonIndex].availablespace += 1;\n            }\n            if (this.cartItems[index].space == 0) {\n                this.cartItems.splice(index, 1);\n            }\n\n            if(this.cartItems.length == 0){\n              this.showProduct = true;\n            }\n\n            console.log(this.cartItems);\n\n\n        },\n        cartCount: function(){\n            let cartQuantity = 0;\n            for (let index = 0; index < this.cartItems.length; index++) {\n                cartQuantity += this.cartItems[index].space;\n                \n            }\n            return cartQuantity;\n        },\n        searchLessons: function () {\n            \n            fetch(\"https://cw2-backend.herokuapp.com/collection/lesson/\" + this.searchTxt).then(\n            (response) => {\n                response.json().then(\n                    (data) => {\n                        console.log(data);\n                        this.lessons = data;\n                        console.log(this.lessons);\n                    });\n            })\n        },\n        checkOut: function (checkOutName, checkOutNumber) {\n            fetch('https://cw2-backend.herokuapp.com/collection/order', {\n                method: 'POST', // set the HTTP method as 'POST'\n                headers: {\n                    'Content-Type': 'application/json', // set the data type as JSON\n                },\n                body: JSON.stringify({ name: checkOutName, phone: checkOutNumber, lessons: this.cartItems }), // need to stringify the JSON object\n            })\n                .then(response => response.json())\n                .then(responseJSON => {\n                    console.log('Success:', responseJSON);\n                });\n\n            for (let index = 0; index < this.cartItems.length; index++) {\n                const lesson = this.cartItems[index].lesson;\n                fetch(`https://cw2-backend.herokuapp.com/collection/lesson/${lesson._id}`, {\n                    method: 'PUT', // set the HTTP method as 'POST'\n                    headers: {\n                        'Content-Type': 'application/json', // set the data type as JSON\n                    },\n                    body: JSON.stringify({ availablespace: lesson.availablespace}), // need to stringify the JSON object\n                })\n                    .then(response => response.json())\n                    .then(responseJSON => {\n                        console.log('Success:', responseJSON);\n                    });\n            }\n            // alert(\"Check out successful\\nYour order has been submitted\");\n            this.showProduct = true;\n            this.cartItems = [];\n            this.$swal({\n                title: \"Check out successful\",\n                text: \"Your order has been submitted\",\n                icon: \"success\",\n            });\n            \n        },\n        fetchLesson: function (_id) {\n            const lessonIndex = this.lessons.findIndex(lesson => lesson._id === _id);\n            if (lessonIndex == -1) {\n                return;\n            }\n            return this.lessons[lessonIndex];\n        }\n       \n    },\n    \n    created: function () {\n        fetch(\"https://cw2-backend.herokuapp.com/collection/lesson/\").then(\n             (response) => {\n                response.json().then(\n                     (data) => {\n                        console.log(data);\n                        this.lessons = data;\n                        console.log(this.lessons + \"Fetched\");\n                    });\n            })\n    }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"]}]}